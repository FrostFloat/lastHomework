<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>添加旅游产品</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<form class="form-horizontal" id="addTPForm" role="form" method="post" enctype=“multipart/form-data”>
    <div class="form-group">
        <label for="name" class="col-sm-2 control-label">名字<span style="color: red">*</span></label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="name" name="name" placeholder="请输入名字" required="required">
        </div>
    </div>
    <div class="form-group">
        <label for="price" class="col-sm-2 control-label">价格</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="price" name="price" placeholder="请输入价格">
        </div>
    </div>
    <div class="form-group">
        <label for="amount" class="col-sm-2 control-label">数量</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="amount" name="amount" placeholder="请输入数量" >
        </div>
    </div>
    <div class="form-group">
        <label for="summary" class="col-sm-2 control-label">概述</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="summary" name="summary" placeholder="请输入概述" >
        </div>
    </div>
    <div class="form-group">
        <label for="beginDate" class="col-sm-2 control-label">开始日期</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="beginDate" name="beginDate" placeholder="请输入开始日期" >
        </div>
    </div>
    <div class="form-group">
        <label for="returnDate" class="col-sm-2 control-label">结束日期</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="returnDate" name="returnDate" placeholder="请输入开始日期" >
        </div>
    </div>
    <div class="form-group">
        <label for="arrangement" class="col-sm-2 control-label">具体安排</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="arrangement" name="arrangement" placeholder="请输入具体安排" >
        </div>
    </div>

    <div class="form-group">
        <label for="imgFile" class="col-sm-2 control-label">宣传照片</label>
        <div class="col-sm-10">
            <label for="imgFile" class="col-sm-2 control-label" >
                <input type="text" class="form-control" id="imgURL" placeholder="点我上传" readonly="readonly">
                <input type="file" class="form-control" id="imgFile" name="imgFile" style="opacity: 0;position: absolute;left: 0;top: 0;">
                <span>jpg,jpeg,png</span>
            </label>
            <img id="image" name="image" width="200px" height="200px" class="img-rounded" alt="通常的占位符">

        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-10">
            <input type="submit" class="form-control" id="submit" onclick="save()" value="提交">
        </div>
        <div class="col-sm-10">
            <input type="reset" class="form-control" id="reset" value="重置" >
        </div>
    </div>
</form>
</body>
<script>

    function save() {
        document.getElementById("addTPForm").action = "/travelPackage/insert";
    }

    var fileInput = document.querySelector('input[type=file]'),
        previewImg = document.querySelector('img');
    fileInput.addEventListener('change', function () {

        var file = this.files[0];
        var reader = new FileReader();
        //判断图片格式
        var strs = fileInput.value.split('\\');
        var fileName = strs[strs.length - 1];
        var suffix = fileName.toLowerCase().substr(fileName.lastIndexOf("."));
        if(suffix == ".jpg" | suffix == ".jpeg" | suffix == ".png")
        {
            alert("图片上传成功");
        }
        else
        {
            alert("图片上传失败");
            return;
        }
        document.getElementById("imgURL").placeholder = fileName;

        // 监听reader对象的的onload事件，当图片加载完成时，把base64编码賦值给预览图片
        reader.addEventListener("load", function () {
            previewImg.src = reader.result;
        }, false);
        // 调用reader.readAsDataURL()方法，把图片转成base64
        reader.readAsDataURL(file);

    }, false);



</script>
</html>